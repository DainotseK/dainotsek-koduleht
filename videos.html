<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DainotseK Videos - Ametlik Koduleht</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --main-blue: #4a90e2;
            --dark-bg: #121212;
            --card-bg: #1e1e1e;
            --text-color: #f4f4f4;
        }
        html { scroll-behavior: smooth; scroll-padding-top: 80px; }
        body {
            font-family: 'Montserrat', sans-serif; margin: 0; padding: 0; background-color: var(--dark-bg);
            color: var(--text-color); display: flex; flex-direction: column; min-height: 100vh;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; flex-grow: 1; }
        header { text-align: center; padding: 60px 20px; }
        header h1 { font-size: 4rem; color: #fff; margin: 0; text-transform: uppercase; letter-spacing: 2px; }
        nav {
            background: #222; color: #fff; padding: 1rem 0; text-align: center;
            position: sticky; top: 0; z-index: 1000; overflow-x: auto; white-space: nowrap;
        }
        nav a { color: #fff; text-decoration: none; padding: 10px 15px; font-size: 1.1rem; transition: color .3s ease; }
        nav a:hover, nav a.active { color: var(--main-blue); }
        .content-title { text-align: center; font-size: 2.5rem; margin-bottom: 20px; }
        .content-title a { color: inherit; text-decoration: none; transition: color 0.3s ease; }
        .content-title a:hover { color: var(--main-blue); }
        .intro-text { text-align: center; max-width: 800px; margin: 0 auto 40px auto; font-size: 1.1rem; color: #ccc; }
        
        .playlist-section { margin-bottom: 60px; }
        .playlist-title { font-size: 2rem; color: var(--main-blue); border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 30px; }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }
        .video-item {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #333;
        }
        .video-item iframe { width: 100%; aspect-ratio: 16 / 9; border: none; }
        .video-info { padding: 15px; }
        .video-info h3 { font-size: 1.1rem; margin-top: 0; margin-bottom: 10px; height: 3.6em; overflow: hidden; } /* Mahutab umbes 3 rida teksti */
        #loading-message { text-align: center; font-size: 1.2rem; padding: 40px; }

        footer { text-align: center; padding: 40px 20px; color: #aaa; border-top: 1px solid #333; margin-top: auto; }
        @media (max-width: 768px) { header h1 { font-size: 2.5rem; } }
    </style>
</head>
<body>

    <header><h1>DainotseK</h1></header>

    <nav>
        <div class="container"><a href="index.html">Avaleht</a><a href="videos.html" class="active">Videos</a><a href="music.html">Music</a><a href="finance.html">Finance</a><a href="portaal.html">Portaal</a><a href="tulevik.html">Tulevik</a><a href="kontakt.html">Kontakt</a></div>
    </nav>

    <div class="container">
        <h2 class="content-title"><a href="https://www.youtube.com/@DainotseK" target="_blank" rel="noopener noreferrer">DainotseK Videos</a></h2>
        
        <p class="intro-text">Siit leiad minu kire videoloomingu vastu, mis on jagatud neljaks. Olgu selleks siis kaasahaaravad seiklused **Gaming**-maailmas, hingematvad hetked Eestimaa looduses (**Nature**), unikaalsed perspektiivid otse taevalaotusest (**Drone**) või aja lummav kulg kiirendatud videotes (**Timelapse**) – loodan, et leiad siit midagi, mis sind kõnetab.</p>
        
        <div id="sections-container">
            <p id="loading-message">Laen videoid...</p>
        </div>
    </div>

    <footer><p>© 2025 DainotseK. Kõik õigused kaitstud.</p></footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sectionsContainer = document.getElementById('sections-container');
            const loadingMessage = document.getElementById('loading-message');
            
            fetch('/.netlify/functions/getVlogVideos')
                .then(response => {
                    if (!response.ok) { throw new Error(`Network response was not ok: ${response.statusText}`); }
                    return response.json();
                })
                .then(playlists => {
                    loadingMessage.style.display = 'none';
                    
                    if (playlists.length === 0) {
                        sectionsContainer.innerHTML = '<p>Sisu ei leitud.</p>';
                        return;
                    }

                    playlists.forEach(playlist => {
                        const sectionElement = document.createElement('div');
                        sectionElement.className = 'playlist-section';

                        let videoHTML = '';
                        if (playlist.videos.length > 0) {
                            playlist.videos.forEach(video => {
                                videoHTML += createVideoHTML(video);
                            });
                        } else {
                            videoHTML = '<p>Praegu ei ole siin sektsioonis uusi videoid saadaval.</p>';
                        }

                        sectionElement.innerHTML = `
                            <h3 class="playlist-title">${playlist.title}</h3>
                            <div class="video-grid">
                                ${videoHTML}
                            </div>
                        `;
                        sectionsContainer.appendChild(sectionElement);
                    });
                })
                .catch(error => {
                    console.error('Error fetching video sections:', error);
                    loadingMessage.innerHTML = '<p>Vabandust, videote laadimisel tekkis viga.</p>';
                });

            function createVideoHTML(video) {
                const videoId = video.snippet.resourceId.videoId;
                const title = video.snippet.title;
                return `
                    <div class="video-item">
                        <iframe 
                            src="https://www.youtube.com/embed/${videoId}" 
                            title="${title}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen>
                        </iframe>
                        <div class="video-info">
                            <h3>${title}</h3>
                        </div>
                    </div>
                `;
            }
        });
    </script>

</body>
</html>
