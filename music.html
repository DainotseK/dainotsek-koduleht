<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DainotseK Music - Ametlik Koduleht</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --main-blue: #4a90e2;
            --dark-bg: #121212;
            --card-bg: #1e1e1e;
            --text-color: #f4f4f4;
        }
        html { scroll-behavior: smooth; scroll-padding-top: 80px; }
        body {
            font-family: 'Montserrat', sans-serif; margin: 0; padding: 0; background-color: var(--dark-bg);
            color: var(--text-color); display: flex; flex-direction: column; min-height: 100vh;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; flex-grow: 1; }
        header { text-align: center; padding: 60px 20px; }
        header h1 { font-size: 4rem; color: #fff; margin: 0; text-transform: uppercase; letter-spacing: 2px; }
        nav {
            background: #222; color: #fff; padding: 1rem 0; text-align: center;
            position: sticky; top: 0; z-index: 1000; overflow-x: auto; white-space: nowrap;
        }
        nav a { color: #fff; text-decoration: none; padding: 10px 15px; font-size: 1.1rem; transition: color .3s ease; }
        nav a:hover, nav a.active { color: var(--main-blue); }
        .content-title { text-align: center; font-size: 2.5rem; margin-bottom: 20px; }
        .content-title a { color: inherit; text-decoration: none; transition: color 0.3s ease; }
        .content-title a:hover { color: var(--main-blue); }
        .intro-text { text-align: center; max-width: 800px; margin: 0 auto 40px auto; font-size: 1.1rem; color: #ccc; }
        
        #featured-video-container, #popular-featured-video { margin-bottom: 40px; }
        #video-grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        .video-item {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #333;
        }
        .video-item iframe { width: 100%; aspect-ratio: 16 / 9; border: none; }
        .video-info { padding: 15px; }
        .video-info h3 { font-size: 1.2rem; margin-top: 0; margin-bottom: 10px; }
        .video-info p { font-size: 0.9rem; color: #ccc; line-height: 1.5; }
        #loading-message { text-align: center; font-size: 1.2rem; padding: 40px; }
        .section-divider-title { text-align: center; font-size: 1.8rem; margin: 60px 0 30px 0; color: var(--main-blue); }

        footer { text-align: center; padding: 40px 20px; color: #aaa; border-top: 1px solid #333; margin-top: auto; }
        @media (max-width: 768px) { header h1 { font-size: 2.5rem; } }
    </style>
</head>
<body>

    <header><h1>DainotseK</h1></header>

    <nav>
        <div class="container"><a href="index.html">Avaleht</a><a href="videos.html">Videos</a><a href="music.html" class="active">Music</a><a href="finance.html">Finance</a><a href="portaal.html">Portaal</a><a href="tulevik.html">Tulevik</a><a href="kontakt.html">Kontakt</a></div>
    </nav>

    <div class="container">
        <h2 class="content-title"><a href="https://www.youtube.com/@DainotseKMusic" target="_blank" rel="noopener noreferrer">DainotseK Music</a></h2>
        <p class="intro-text">Sellel lehel kuuled muusikat, mis on sündinud minu ideedest ja visioonist, kuid millele on andnud vormi ja heli tehisintellekti loominguline jõud. Iga lugu on unikaalne teekond, kus inimlik loovus kohtub tehnoloogia piiritute võimalustega.</p>
        
        <div id="loading-message"><p>Laen videoid...</p></div>
        
        <div id="featured-video-container"></div>
        <div id="video-grid-container"></div>
        
        <div id="popular-video-section" style="display: none;">
            <h2 class="section-divider-title">Kõige Populaarsem Video</h2>
            <div id="popular-featured-video"></div>
        </div>
    </div>

    <footer><p>© 2025 DainotseK. Kõik õigused kaitstud.</p></footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const featuredContainer = document.getElementById('featured-video-container');
            const gridContainer = document.getElementById('video-grid-container');
            const popularContainer = document.getElementById('popular-featured-video');
            const popularSection = document.getElementById('popular-video-section');
            const loadingMessage = document.getElementById('loading-message');
            
            fetch('/.netlify/functions/getYoutubeVideos')
                .then(response => {
                    if (!response.ok) { throw new Error(`Network response was not ok: ${response.statusText}`); }
                    return response.json();
                })
                .then(data => {
                    loadingMessage.style.display = 'none';
                    const { latestVideos, popularVideo } = data;

                    if (!latestVideos || latestVideos.length === 0) {
                        gridContainer.innerHTML = '<p>Videoid ei leitud.</p>';
                        return;
                    }

                    // Paigutame kõige uuema video esile
                    const newestVideo = latestVideos[0];
                    if (newestVideo) {
                        featuredContainer.innerHTML = createVideoHTML(newestVideo, true);
                    }

                    // Paigutame järgmised 6 videot ruudustikku
                    const gridVideos = latestVideos.slice(1, 7);
                    gridVideos.forEach(video => {
                        const videoElement = document.createElement('div');
                        videoElement.innerHTML = createVideoHTML(video, false);
                        gridContainer.appendChild(videoElement);
                    });
                    
                    // Paigutame kõige populaarsema video lehe lõppu
                    if (popularVideo) {
                        popularSection.style.display = 'block';
                        popularContainer.innerHTML = createVideoHTML(popularVideo, true);
                    }
                })
                .catch(error => {
                    console.error('Error fetching videos:', error);
                    loadingMessage.innerHTML = '<p>Vabandust, videote laadimisel tekkis viga.</p>';
                });

            function createVideoHTML(video, isFeatured) {
                const videoId = video.id.videoId;
                const title = video.snippet.title;
                return `
                    <div class="video-item">
                        <iframe 
                            src="https://www.youtube.com/embed/${videoId}" 
                            title="${title}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen>
                        </iframe>
                        <div class="video-info">
                            <h3>${title}</h3>
                        </div>
                    </div>
                `;
            }
        });
    </script>

</body>
</html>
